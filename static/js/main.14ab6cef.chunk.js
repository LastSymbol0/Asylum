(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{313:function(e,t,n){},314:function(e,t,n){},315:function(e,t){},317:function(e,t){},333:function(e,t){},334:function(e,t){},394:function(e,t){},396:function(e,t){},410:function(e,t){},415:function(e,t){},417:function(e,t){},427:function(e,t){},429:function(e,t){},456:function(e,t){},458:function(e,t){},463:function(e,t){},465:function(e,t){},472:function(e,t){},484:function(e,t){},487:function(e,t){},498:function(e,t){},512:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"findPlayerGlobalAccountAddress",(function(){return P})),n.d(r,"findPlayerGameAccountAddress",(function(){return S})),n.d(r,"initPlayer",(function(){return K})),n.d(r,"updatePlayerNickname",(function(){return C})),n.d(r,"updatePlayerAvatar",(function(){return G})),n.d(r,"addGameToLibrary",(function(){return M})),n.d(r,"removeGameFromLibrary",(function(){return T}));var a=n(2),c=n.n(a),i=n(102),u=n.n(i),o=(n(313),n(314),n(301)),s=n(49),l=n(153),p=n(31),d=n(300),m=n(534),f=n(11),b=n(532),j=n(536),h=n(9),y=function(e){var t=e.pages,n=c.a.useState(0),r=Object(f.a)(n,2),a=r[0],i=r[1];return Object(h.jsx)(b.a,{orientation:"vertical",variant:"fullWidth",value:a,onChange:function(e,t){i(t)},children:t.map((function(e,t){return Object(h.jsx)("div",{style:{marginTop:"20px"},children:Object(h.jsx)(j.a,{label:e.name,href:e.path,id:"vertical-tab-".concat(t),"aria-controls":"vertical-tabpanel-".concat(t)})})}))})},v=function(){return Object(h.jsx)("div",{children:"Account page placeholder"})},x=n(1),g=n.n(x),O=n(5),w=n(80),k=n(13),A=n(55),P=function(e,t){return k.PublicKey.findProgramAddress([e.toBuffer()],t)},S=function(e,t,n){return k.PublicKey.findProgramAddress([e.toBuffer(),t.toBuffer()],n)},K=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,a,c,i,u,o,s,l=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"CryptoBuddy77",r=l.length>2&&void 0!==l[2]?l[2]:k.PublicKey.default,a=t.provider.wallet.publicKey,c=t.programId,e.next=6,P(a,c);case 6:return i=e.sent,u=Object(f.a)(i,2),o=u[0],s=u[1],e.next=12,t.rpc.initialize(s,n,r,{accounts:{playerAccount:o,user:a,systemProgram:A.d.SystemProgram.programId}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var r,a,c,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provider.wallet.publicKey,a=t.programId,e.next=4,P(r,a);case 4:return c=e.sent,i=Object(f.a)(c,2),u=i[0],i[1],e.next=10,t.rpc.updateNickname(n,{accounts:{playerAccount:u}});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var r,a,c,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provider.wallet.publicKey,a=t.programId,e.next=4,P(r,a);case 4:return c=e.sent,i=Object(f.a)(c,2),u=i[0],i[1],e.next=10,t.rpc.updateAvatar(n,{accounts:{playerAccount:u}});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var r,a,c,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provider.wallet.publicKey,a=t.programId,e.next=4,P(r,a);case 4:return c=e.sent,i=Object(f.a)(c,2),u=i[0],i[1],e.next=10,t.rpc.addGame(n,{accounts:{playerAccount:u}});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(g.a.mark((function e(t,n){var r,a,c,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.provider.wallet.publicKey,a=t.programId,e.next=4,P(r,a);case 4:return c=e.sent,i=Object(f.a)(c,2),u=i[0],i[1],e.next=10,t.rpc.removeGame(n,{accounts:{playerAccount:u}});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=new k.PublicKey(w.metadata.address);var I=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),u=Object(f.a)(i,2),o=u[0],p=u[1],d=Object(a.useState)(k.PublicKey.default),m=Object(f.a)(d,2),b=m[0],j=m[1],y=Object(a.useState)([]),v=Object(f.a)(y,2),x=v[0],P=v[1],S=Object(a.useState)(""),K=Object(f.a)(S,2),C=K[0],G=K[1],M=Object(a.useState)(""),T=Object(f.a)(M,2),I=T[0],L=T[1],R=Object(a.useState)(""),z=Object(f.a)(R,2),B=z[0],E=z[1],D=Object(s.c)();function J(){return W.apply(this,arguments)}function W(){return(W=Object(O.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://127.0.0.1:8899",t={preflightCommitment:"processed"},n=new k.Connection("http://127.0.0.1:8899",t.preflightCommitment),r=new A.b(n,D,t.preflightCommitment),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return F.apply(this,arguments)}function F(){return(F=Object(O.a)(g.a.mark((function e(){var t,n,a,i,u,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.findPlayerGlobalAccountAddress(D.publicKey,N);case 7:return a=e.sent,i=Object(f.a)(a,2),u=i[0],i[1],e.next=13,n.account.playerAccount.fetch(u);case 13:o=e.sent,console.log(o),c(!0),p(o.nickname.toString()),j(o.avatar.toString()),P(o.games),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),console.log("Player data fetching error: ",e.t0);case 24:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function H(){return(H=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.initPlayer(n);case 7:c(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Transaction error: ",e.t0);case 13:q();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Q(){return(Q=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.updatePlayerNickname(n,C);case 7:G(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Transaction error: ",e.t0);case 13:q();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function V(){return(V=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.updatePlayerAvatar(n,new k.PublicKey(I));case 7:L(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Transaction error: ",e.t0);case 13:q();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function X(){return(X=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.addGameToLibrary(n,new k.PublicKey(B));case 7:E(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Transaction error: ",e.t0);case 13:q();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Y(){return(Y=Object(O.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return t=e.sent,n=new A.a(w,N,t),e.prev=4,e.next=7,r.removeGameFromLibrary(n,new k.PublicKey(B));case 7:E(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Transaction error: ",e.t0);case 13:q();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(D.connected)try{q()}catch(e){n&&console.error(e)}}),[D.connected]),D.connected?Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("div",{children:[!n&&Object(h.jsx)("button",{onClick:function(){return H.apply(this,arguments)},children:"Initialize"}),n?Object(h.jsxs)("div",{style:{width:"fit-content",margin:"0 auto",textAlign:"left"},children:[Object(h.jsx)("h1",{children:"Current player account state"}),Object(h.jsx)("h3",{children:"Current nickname: "}),o,Object(h.jsx)("h3",{children:"Current avatar: "}),b.toString(),Object(h.jsx)("h3",{children:"Current games: "}),x&&0!==x.length?Object(h.jsx)("ul",{children:x.map((function(e,t){return Object(h.jsx)("li",{children:e.toString()},t)}))}):"No games so far",Object(h.jsx)("h1",{style:{marginTop:60},children:"Edit"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{style:{width:200},placeholder:"New nickname (string, 32 bytes)",onChange:function(e){return G(e.target.value)},value:C}),Object(h.jsx)("button",{onClick:function(){return Q.apply(this,arguments)},children:"Set nickname"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{style:{width:200},placeholder:"New avatar (any Public key)",onChange:function(e){return L(e.target.value)},value:I}),Object(h.jsx)("button",{onClick:function(){return V.apply(this,arguments)},children:"Set avatar"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{style:{width:200},placeholder:"Game id (any Public key)",onChange:function(e){return E(e.target.value)},value:B}),Object(h.jsx)("button",{onClick:function(){return X.apply(this,arguments)},children:"Add game"}),Object(h.jsx)("button",{onClick:function(){return Y.apply(this,arguments)},children:"Remove game"})]})]}):Object(h.jsx)("h3",{children:"Please inialize your account."})]})}):Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"},children:Object(h.jsx)(l.b,{})})},L=[{path:"/Asylum/#",name:"Home",component:v},{path:"/Asylum/#/account",name:"Account",component:v},{path:"/Asylum/#/gamesStore",name:"Games Store",component:function(){return Object(h.jsx)("div",{children:"GamesStore page placeholder"})}},{path:"/Asylum/#/inventory",name:"Inventory",component:function(){return Object(h.jsx)("div",{children:"Inventory page placeholder"})}},{path:"/Asylum/#/library",name:"Library",component:function(){return Object(h.jsx)("div",{children:"Library page placeholder"})}},{path:"/Asylum/#/marketplace",name:"Marketplace",component:function(){return Object(h.jsx)("div",{children:"Marketplace page placeholder"})}},{path:"/Asylum/#/demo1",name:"[DEV] Demo 1 (Players)",component:I}],R=[Object(o.a)()],z=function(e){var t=e.pages;return Object(h.jsx)(p.c,{children:t.map((function(e){return Object(h.jsx)(p.a,{path:e.path,exact:!0,component:e.component},e.path)}))})};function B(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(d.a,{basename:"/".concat("/Asylum"),children:Object(h.jsxs)(m.a,{container:!0,spacing:2,columns:5,children:[Object(h.jsx)(m.a,{item:!0,xs:1,children:Object(h.jsx)(y,{pages:L})}),Object(h.jsx)(m.a,{item:!0,xs:4,children:Object(h.jsx)(z,{pages:L})})]})})})}var E=function(){return Object(h.jsx)(s.a,{endpoint:"http://127.0.0.1:8899",children:Object(h.jsx)(s.b,{wallets:R,autoConnect:!0,children:Object(h.jsx)(l.a,{children:Object(h.jsx)(B,{})})})})},D=n(54),J=Object(D.b)({name:"accountPage",initialState:{},reducers:{},extraReducers:function(e){}}).reducer,W=Object(D.b)({name:"gamesStorePage",initialState:{},reducers:{},extraReducers:function(e){}}).reducer,q=Object(D.b)({name:"inventoryPage",initialState:{},reducers:{},extraReducers:function(e){}}).reducer,F=Object(D.b)({name:"libraryPage",initialState:{},reducers:{},extraReducers:function(e){}}).reducer,H=Object(D.b)({name:"marketplacePage",initialState:{},reducers:{},extraReducers:function(e){}}).reducer,Q=Object(D.a)({reducer:{accountPage:J,gamesStorePage:W,inventoryPage:q,libraryPage:F,marketplacePage:H}}),V=n(302);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(V.a,{store:Q,children:Object(h.jsx)(E,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"asylum","instructions":[{"name":"initialize","accounts":[{"name":"playerAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"nickname","type":"string"},{"name":"avatar","type":"publicKey"}]},{"name":"updateNickname","accounts":[{"name":"playerAccount","isMut":true,"isSigner":false}],"args":[{"name":"nickname","type":"string"}]},{"name":"updateAvatar","accounts":[{"name":"playerAccount","isMut":true,"isSigner":false}],"args":[{"name":"avatar","type":"publicKey"}]},{"name":"addGame","accounts":[{"name":"playerAccount","isMut":true,"isSigner":false}],"args":[{"name":"game","type":"publicKey"}]},{"name":"removeGame","accounts":[{"name":"playerAccount","isMut":true,"isSigner":false}],"args":[{"name":"game","type":"publicKey"}]}],"accounts":[{"name":"PlayerAccount","type":{"kind":"struct","fields":[{"name":"nickname","type":"string"},{"name":"avatar","type":"publicKey"},{"name":"games","type":{"vec":"publicKey"}}]}}],"metadata":{"address":"Ec5HRTfsozgfQerig5DTsKqGL3MkZ3jcdohb3qYXwzMN"}}')}},[[512,1,2]]]);
//# sourceMappingURL=main.14ab6cef.chunk.js.map